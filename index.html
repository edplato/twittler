<!DOCTYPE html>
<html>
  <head>
    <link href="https://fonts.googleapis.com/css?family=Lato:300,400" rel="stylesheet">
    <link rel="stylesheet" type="text/css" href="style.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.18.1/moment.min.js"></script>
    <script src="jquery.js"></script>
    <script src="data_generator.js"></script>
  </head>
  <body>

  <div class="container">

    <section class="col left-col">
    </section>

    <section class="col tweet-stream">

      <ul>  
        <li class="first"></li>
      </ul>

    </section>

    <section class="col right-col">
    </section>

  </div>

    <script>

      $(document).ready(function(){
        var $body = $('body');
        var $ul = $('ul');
        
        var index = 0;
        
        // constant stream interval to grab new tweets
        setInterval(function() {

          // if new tweets run low, delay stream
          if(streams.home.length - 5 <= index){
            setTimeout(function(){
            }, 1500);
          } else {
          let $first = $('li').first();

          var tweet = streams.home[index];

          var timeTweetedInput = tweet.created_at.toString();
          var reformatDate = timeTweetedInput.slice(4, 24);
          var timeAgo = moment(reformatDate, 'MMM DD YYYY h:mma ZZ').fromNow();

          var userName = checkUser(tweet.user);
          var $tweetDetails = $(
            '<li class="tweetDetails"><div><strong>' + userName + '</strong> <span class="userHandle">@' + tweet.user + '</span> &middot; ' + timeAgo +'</div>' 
            +'<div>'+ tweet.message + '</div></li>');

          $first.prepend($tweetDetails);
          // var $tweet = $('<li class="tweet"></li>');
          // $tweet.text('@' + tweet.user + ': ' + tweet.message);

          index++;
          }
        }, 500);

        // returns username that matches twitter handle
        function checkUser(handleInput) {
          switch(handleInput) {
            case "shawndrost":
              return "Shawn Drost";
              break;
            case "mracus":
              return "Marcus Phillips";
              break;
            case "douglascalhoun":
              return "Douglas Calhoun";
              break;
            case "sharksforcheap":
              return "Anthony Phillips";
              break;
            default: 
              return "";
          }
        };

      });

    </script>
  </body>
</html>
