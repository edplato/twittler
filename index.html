<!DOCTYPE html>
<html>
  <head>
    <link href="https://fonts.googleapis.com/css?family=Lato:300,400" rel="stylesheet">
    <link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    <link rel="stylesheet" type="text/css" href="style.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.18.1/moment.min.js"></script>
    <script src="jquery.js"></script>
    <script src="data_generator.js"></script>
  </head>
  <body>

  <!-- Header -->

  <header class="global-header">
      <div class="container group">

      <nav class="nav left-nav">
        <ul>
          <li><a href="#"><i class="fa fa-home fa-lg fa-fw" aria-hidden="true"></i>Home</a></li><!--
          --><li><a href="#"><i class="fa fa-bolt fa-lg fa-fw" aria-hidden="true"></i>Moments</a></li><!--
          --><li><a href="#"><i class="fa fa-bell fa-lg fa-fw" aria-hidden="true"></i>Notifications</a></li><!--
          --><li><a href="#"><i class="fa fa-envelope fa-lg fa-fw" aria-hidden="true"></i>Messages</a></li>
        </ul>
      </nav>

      <a href="#"><i class="fa fa-twitter fa-2x twitterLogo" aria-hidden="true"></i></a>
     
      <nav class="nav right-nav">
        <ul>
          <li><div><form class="form-search">
            <input class="header-search" type="text" placeholder="Search Twittler" name="searchBox"><i class="fa fa-search search-icon" aria-hidden="true"></i>
          </form></div></li><!--
          --><li><a href="#"><img class="header-profile-pic" src="assets/images/eaplato.jpg" alt="Ed Plato"></a></li><!--
          --><li><button class="header-tweet-button">Tweet</button></li>
        </ul>
      </nav>

      </div>

  </header>

  <!-- Feed Content Container -->
  <div class="header-poster"></div>
  <div class="header-bar"></div>

  <div class="container feed-content">


    <section class="col left-col">

       <div class="col-content card">
            <img src="assets/images/eaplato.jpg" alt="Ed Plato">
              <ul>
                <li><a href="https://twitter.com/eaplato">Ed Plato</a></li>
                <li><a href="https://twitter.com/eaplato">@eaplato</a></li>
              </ul>
              <p>The Official Twitter Page of Ed Plato</p>
       </div>

       <div class="col-content trends"></div>

    </section>

    <section class="col tweet-stream">

      <ul>  
        <li class="first"></li>
      </ul>

    </section>

    <section class="col right-col">

      <div class="col-content who-to-follow">
        <div class="who-to-follow-header"><span>Who to follow</span> &middot;<a href="#">Refresh</a>&middot;<a href="#">View All</a></div>
      </div>
      
      <div class="col-content legal">
        <p>&copy; 2017 Twittler <a href="#">About</a> <a href="#">Help Center</a> <a href="#">Terms</a> <a href="#">Privacy policy</a> <a href="#">Cookies</a> <a href="#">Ads info</a> <a href="#">Brand</a> <a href="#">Blog</a> <a href="#">Status</a> <a href="#">Apps</a> <a href="#">Jobs</a> <a href="#">Businesses</a> <a href="#">Developers</a></p>
      </div>

      <div class="col-content advertise">
        <a class="advertise" href="#"><i class="fa fa-check-square-o fa-fw" aria-hidden="true"></i>Advertise with Twittler</a>
      </div>

    </section>

  </div>

    <script>

      $(document).ready(function(){
        var $body = $('body');
        var $ul = $('ul');
        
        var index = 0;
        
        // constant stream interval to grab new tweets
        setInterval(function() {
          // if new tweets run low, delay stream
          if(streams.home.length - 5 <= index){
            setTimeout(function(){
            }, 1500);
          } else {
          let $first = $('.first');

          var tweet = streams.home[index];

          var timeTweetedInput = tweet.created_at.toString();
          var reformatDate = timeTweetedInput.slice(4, 24);
          var timeAgo = moment(reformatDate, 'MMM DD YYYY h:mma ZZ').fromNow();

          var userName = checkUser(tweet.user);
          var $tweetDetails = $(
            '<li class="tweetDetails ' + tweet.user + '"><div><strong>' + userName + '</strong> <span class="userHandle">@' + tweet.user + '</span> &middot; ' + timeAgo + '</div>' 
            +'<div>'+ tweet.message + '</div></li>');

          $first.prepend($tweetDetails);
          // var $tweet = $('<li class="tweet"></li>');
          // $tweet.text('@' + tweet.user + ': ' + tweet.message);

          index++;
          }
        }, 2500);

        // returns username that matches twitter handle
        function checkUser(handleInput) {
          switch(handleInput) {
            case "shawndrost":
              return "Shawn Drost";
              break;
            case "mracus":
              return "Marcus Phillips";
              break;
            case "douglascalhoun":
              return "Douglas Calhoun";
              break;
            case "sharksforcheap":
              return "Anthony Phillips";
              break;
            default: 
              return "";
          }
        };

      });

    </script>
  </body>
</html>
